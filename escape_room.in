% escape_room.in
% First-Order Logic for the Escape Room Game

% Define rooms
room(room1).
room(room2).
room(exit).

% Define doors
door(door1).
door(door2).
connects(door1, room1, room2).
connects(door2, room2, exit).

% Define keys
key(key1).
key(key2).
opens(key1, door1).
opens(key2, door2).

% Define puzzles
puzzle(puzzle1).
puzzle(puzzle2).

% Solving puzzles grants keys
all X (correct_answer(X, puzzle1) -> solved(X, puzzle1)).
all X (solved(X, puzzle1) -> has(X, key1)).

all X (correct_answer(X, puzzle2) -> solved(X, puzzle2)).
all X (solved(X, puzzle2) -> has(X, key2)).

% Define traps
trap(trap1).
% Disarming trap1 makes room2 safe
all X (disarmed(trap1) & at(X, room2) -> safe(X, room2)).

% Disarming traps requires key2
all X all Y (has(X, key2) & trap(Y) -> disarmed(Y)).

% Initial item locations
contains(room1, puzzle1).
contains(room2, puzzle2).
contains(room2, trap1).

% Rules for moving between rooms
all X all Y all A all B (door(Y) & connects(Y, A, B) & open(Y) & at(X, A) -> can_move(X, A, B)).

% Opening doors
all X all Y all K (has(X, K) & opens(K, Y) -> open(Y)).
